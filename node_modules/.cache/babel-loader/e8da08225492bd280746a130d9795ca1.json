{"ast":null,"code":"var _jsxFileName = \"/home/carol/Projetos/sd-024-b-project-trivia-react-redux/src/pages/Game.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Header from '../components/Header';\nimport QuestionCard from '../components/QuestionCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Game extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      actualQuestion: 0,\n      questions: [],\n      isLoading: true\n    };\n\n    this.nextButtonHandler = () => {\n      const {\n        actualQuestion\n      } = this.state;\n      const {\n        history\n      } = this.props;\n      const lastQuestion = 4;\n\n      if (actualQuestion >= lastQuestion) {\n        history.push('/feedback');\n      }\n\n      this.setState(prevState => ({\n        actualQuestion: prevState.actualQuestion + 1\n      }));\n      console.log(this.props);\n    };\n\n    this.fetchQuestions = async () => {\n      const {\n        history\n      } = this.props;\n      const errorCode = 3;\n      const sucessCode = 0;\n      const token = localStorage.getItem('token');\n      const response = await fetch(`https://opentdb.com/api.php?amount=5&token=${token}`);\n      const questions = await response.json();\n\n      if (questions.response_code === errorCode) {\n        localStorage.removeItem('token');\n        history.push('/');\n      } else if (questions.response_code === sucessCode) {\n        this.setState({\n          questions: questions.results,\n          isLoading: false\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.fetchQuestions();\n  }\n\n  render() {\n    const {\n      questions,\n      actualQuestion,\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \" Carregando... \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 23\n      }, this) : /*#__PURE__*/_jsxDEV(QuestionCard, {\n        data: questions[actualQuestion],\n        nextButtonHandler: this.nextButtonHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nGame.propTypes = {\n  history: PropTypes.shape().isRequired\n}; // const mapStateToProps = (state) => ({\n// });\n\nconst mapDispatchToProps = dispatch => ({\n  delToken: () => dispatch(handleDeleteToken())\n});\n\nexport default connect(null, mapDispatchToProps)(Game);","map":{"version":3,"names":["React","PropTypes","connect","Header","QuestionCard","Game","Component","state","actualQuestion","questions","isLoading","nextButtonHandler","history","props","lastQuestion","push","setState","prevState","console","log","fetchQuestions","errorCode","sucessCode","token","localStorage","getItem","response","fetch","json","response_code","removeItem","results","componentDidMount","render","propTypes","shape","isRequired","mapDispatchToProps","dispatch","delToken","handleDeleteToken"],"sources":["/home/carol/Projetos/sd-024-b-project-trivia-react-redux/src/pages/Game.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport Header from '../components/Header';\nimport QuestionCard from '../components/QuestionCard';\n\nclass Game extends React.Component {\n  state = {\n    actualQuestion: 0,\n    questions: [],\n    isLoading: true,\n  };\n\n  componentDidMount() {\n    this.fetchQuestions();\n  }\n\n  nextButtonHandler = () => {\n    const { actualQuestion } = this.state;\n    const { history } = this.props;\n    const lastQuestion = 4;\n    if (actualQuestion >= lastQuestion) {\n      history.push('/feedback');\n    }\n    this.setState((prevState) => ({\n      actualQuestion: prevState.actualQuestion + 1,\n    }));\n    console.log(this.props);\n  };\n\n  fetchQuestions = async () => {\n    const { history } = this.props;\n    const errorCode = 3;\n    const sucessCode = 0;\n    const token = localStorage.getItem('token');\n    const response = await fetch(`https://opentdb.com/api.php?amount=5&token=${token}`);\n    const questions = await response.json();\n    if (questions.response_code === errorCode) {\n      localStorage.removeItem('token');\n      history.push('/');\n    } else if (questions.response_code === sucessCode) {\n      this.setState({ questions: questions.results, isLoading: false });\n    }\n  };\n\n  render() {\n    const { questions, actualQuestion, isLoading } = this.state;\n    return (\n      <section>\n        <Header />\n        {isLoading ? (<p> Carregando... </p>) : (\n          <QuestionCard\n            data={ questions[actualQuestion] }\n            nextButtonHandler={ this.nextButtonHandler }\n          />)}\n      </section>\n    );\n  }\n}\n\nGame.propTypes = {\n  history: PropTypes.shape().isRequired,\n};\n\n// const mapStateToProps = (state) => ({\n// });\n\nconst mapDispatchToProps = (dispatch) => ({\n  delToken: () => dispatch(handleDeleteToken()),\n});\n\nexport default connect(null, mapDispatchToProps)(Game);\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,YAAP,MAAyB,4BAAzB;;;AAEA,MAAMC,IAAN,SAAmBL,KAAK,CAACM,SAAzB,CAAmC;EAAA;IAAA;IAAA,KACjCC,KADiC,GACzB;MACNC,cAAc,EAAE,CADV;MAENC,SAAS,EAAE,EAFL;MAGNC,SAAS,EAAE;IAHL,CADyB;;IAAA,KAWjCC,iBAXiC,GAWb,MAAM;MACxB,MAAM;QAAEH;MAAF,IAAqB,KAAKD,KAAhC;MACA,MAAM;QAAEK;MAAF,IAAc,KAAKC,KAAzB;MACA,MAAMC,YAAY,GAAG,CAArB;;MACA,IAAIN,cAAc,IAAIM,YAAtB,EAAoC;QAClCF,OAAO,CAACG,IAAR,CAAa,WAAb;MACD;;MACD,KAAKC,QAAL,CAAeC,SAAD,KAAgB;QAC5BT,cAAc,EAAES,SAAS,CAACT,cAAV,GAA2B;MADf,CAAhB,CAAd;MAGAU,OAAO,CAACC,GAAR,CAAY,KAAKN,KAAjB;IACD,CAtBgC;;IAAA,KAwBjCO,cAxBiC,GAwBhB,YAAY;MAC3B,MAAM;QAAER;MAAF,IAAc,KAAKC,KAAzB;MACA,MAAMQ,SAAS,GAAG,CAAlB;MACA,MAAMC,UAAU,GAAG,CAAnB;MACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,8CAA6CJ,KAAM,EAArD,CAA5B;MACA,MAAMd,SAAS,GAAG,MAAMiB,QAAQ,CAACE,IAAT,EAAxB;;MACA,IAAInB,SAAS,CAACoB,aAAV,KAA4BR,SAAhC,EAA2C;QACzCG,YAAY,CAACM,UAAb,CAAwB,OAAxB;QACAlB,OAAO,CAACG,IAAR,CAAa,GAAb;MACD,CAHD,MAGO,IAAIN,SAAS,CAACoB,aAAV,KAA4BP,UAAhC,EAA4C;QACjD,KAAKN,QAAL,CAAc;UAAEP,SAAS,EAAEA,SAAS,CAACsB,OAAvB;UAAgCrB,SAAS,EAAE;QAA3C,CAAd;MACD;IACF,CArCgC;EAAA;;EAOjCsB,iBAAiB,GAAG;IAClB,KAAKZ,cAAL;EACD;;EA8BDa,MAAM,GAAG;IACP,MAAM;MAAExB,SAAF;MAAaD,cAAb;MAA6BE;IAA7B,IAA2C,KAAKH,KAAtD;IACA,oBACE;MAAA,wBACE,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QADF,EAEGG,SAAS,gBAAI;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAJ,gBACR,QAAC,YAAD;QACE,IAAI,EAAGD,SAAS,CAACD,cAAD,CADlB;QAEE,iBAAiB,EAAG,KAAKG;MAF3B;QAAA;QAAA;QAAA;MAAA,QAHJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAUD;;AAnDgC;;AAsDnCN,IAAI,CAAC6B,SAAL,GAAiB;EACftB,OAAO,EAAEX,SAAS,CAACkC,KAAV,GAAkBC;AADZ,CAAjB,C,CAIA;AACA;;AAEA,MAAMC,kBAAkB,GAAIC,QAAD,KAAe;EACxCC,QAAQ,EAAE,MAAMD,QAAQ,CAACE,iBAAiB,EAAlB;AADgB,CAAf,CAA3B;;AAIA,eAAetC,OAAO,CAAC,IAAD,EAAOmC,kBAAP,CAAP,CAAkChC,IAAlC,CAAf"},"metadata":{},"sourceType":"module"}